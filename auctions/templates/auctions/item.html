{% extends "auctions/layout.html" %}
{% block title %}Auctions - New Listing{% endblock %}

{% block body %}
<div class="wrapper-listing">
  <div class="listings no-border">

    <div class="image-box img-large">
      <img src="{{ item.url }}" alt="" />
    </div>

    <div class="text">
      <div class="title dark-text">{{ item.title }}</div>
      <div class="bid">Bid: <span>${{ item.last_bid|floatformat }}</span></div>

      {% if user.is_authenticated and user.id != item.user.id %}

      {% if invalid %}
      <div class="alert alert-danger mt-2 mb-2 p-2" role="alert">
        Invalid Bid!
      </div>
      {% endif %}

      <form action="" method="POST">
        {% csrf_token %}
        <div class="bid-box mt-1">
          <input type="text" name="bid" value="true" hidden>
          <input type="text" name="value" placeholder="Enter a bid" pattern="[1-9][0-9]*" required>
          <!-- </br> -->
          <button type="submit" class="btn btn-danger ml-2">New Bid</button>
        </div>
      </form>

      <form action="" method="POST">
        {% csrf_token %}
        <input name="user" value="{{ user.id }}" hidden>
        <input type="text" name="bid" value="" hidden>
        {% if watchlist %}
        <input name="remove" value="true" hidden>
        <button type="button" class="btn btn-dark mt-5" onClick={submit()}>Remove from WatchList</button>
        {% else %}
        <input name="remove" value="" hidden>
        <button type="submit" class="btn btn-warning mt-5">Add to WatchList</button>
        {% endif %}
      </form>
      {% endif %}

      {% if user.is_authenticated and user.id == item.user.id %}
      <form action="" method="POST">
        <input name="finished" value="true" hidden>
        <button type="submit" class="btn btn-success mt-2">Finish Auction</button>
      </form>
      {% endif %}

      <div class="details">
        Created by <em>{{ item.user.username}}</em></br>
        Category: <em>{{ item.category }}</em>
      </div>

    </div>
  </div>

  <div class="wrapper-info">
    <div class="description">{{ item.description }}</div>
  </div>

</div>
{% endblock %}